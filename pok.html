<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ì¼“ëª¬ ëŸ¬ë‹ ì•± V12 (ë””ìì¸ ê°œì„ )</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* (V12 ì‹ ê·œ) ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ë° ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì •ì˜ */
        :root {
            --primary-blue: #0075BE;  /* í¬ì¼“ëª¬ ë¸”ë£¨ */
            --accent-yellow: #FFDE00; /* í¬ì¼“ëª¬ ì˜ë¡œ */
            --point-red: #E63946;    /* í¬ì¸íŠ¸ ë ˆë“œ (ê¸°ì¡´ ì‚¬ìš©) */
            --point-green: #4caf50;   /* í€˜ìŠ¤íŠ¸ ì™„ë£Œ */
            --bg-light-gray: #f4f4f9; /* ì•± ì „ì²´ ë°°ê²½ */
            --text-primary: #1a1a1a;   /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
            --text-secondary: #555;  /* ë³´ì¡° í…ìŠ¤íŠ¸ */
            --card-bg: #ffffff;      /* ì¹´ë“œ ë°°ê²½ (í°ìƒ‰) */
            --border-color: #e0e0e0;   /* ì—°í•œ í…Œë‘ë¦¬ */
        }

        body {
            /* (V12) í°íŠ¸ ë° ê¸°ë³¸ ë°°ê²½ìƒ‰ ì ìš© */
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-light-gray);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
        }

        /* === 1. ë©”ì¸ ì•± ì»¨í…Œì´ë„ˆ === */
        #appContainer {
            display: block;
            max-width: 900px;
            margin: 20px auto;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px; /* (V12) ë¶€ë“œëŸ¬ìš´ ê³¡ë¥  */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05); /* (V12) ê·¸ë¦¼ì ê°•í™” */
            padding-bottom: 90px;
        }

        h1, h2, h3 {
            text-align: center;
            color: var(--text-primary);
            font-weight: 700; /* (V12) í°íŠ¸ êµµê¸° */
        }
        h2 {
            border-bottom: 2px solid var(--bg-light-gray);
            padding-bottom: 10px;
        }
        h3 {
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 8px;
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 500; /* (V12) í°íŠ¸ êµµê¸° */
        }

        /* === 2. í˜ì´ì§€ ì „í™˜ ì‹œìŠ¤í…œ === */
        .page {
            display: none;
            margin-top: 20px;
            min-height: 450px;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            position: relative;
        }
        .page.active {
            display: block;
        }

        /* === 3. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (V12 ë””ìì¸) === */
        #bottomNav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            background: var(--card-bg);
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.08); /* (V12) ê·¸ë¦¼ì */
            z-index: 100;
            max-width: 900px;
            margin: 0 auto;
            border-top-left-radius: 20px; /* (V12) ê³¡ë¥  */
            border-top-right-radius: 20px;
            overflow: hidden;
        }
        .nav-btn {
            flex: 1;
            padding: 12px 5px; /* (V12) íŒ¨ë”© ì¡°ì • */
            font-size: 1.0em;
            background: transparent; /* (V12) ê¸°ë³¸ ë°°ê²½ ì—†ìŒ */
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 500;
            transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease; /* (V12) íŠ¸ëœì§€ì…˜ */
        }
        .nav-btn:hover {
            background-color: #f0f2f5; /* (V12) í˜¸ë²„ íš¨ê³¼ */
        }
        .nav-btn:active {
            transform: scale(0.95); /* (V12) í´ë¦­ íš¨ê³¼ */
        }
        .nav-btn.active {
            /* (V12) í™œì„± íƒ­ ìƒ‰ìƒ */
            background: var(--primary-blue);
            color: white;
            font-weight: 700;
        }

        /* === 4. í˜ì´ì§€ë³„ ìŠ¤íƒ€ì¼ë§ (V12) === */

        /* 4-1. í™ˆ í˜ì´ì§€ (ë¡œë¹„) */
        #page-home {
            background-image: url('https://i.imgur.com/hUjQz3j.png');
            padding: 15px;
        }
        /* (V12) í—ˆë¸Œ ì•„ì´í…œ (ì¹´ë“œ ë””ìì¸ ì ìš©) */
        .hub-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }
        .hub-item {
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease;
            width: 100px;
            padding: 10px;
            border-radius: 12px;
            background: var(--card-bg);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); /* (V12) ì¹´ë“œ ê·¸ë¦¼ì */
        }
        .hub-item:hover {
            transform: translateY(-5px); /* (V12) í˜¸ë²„ ì‹œ ë– ì˜¤ë¦„ */
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }
        .hub-item:active {
            transform: translateY(-2px);
        }
        .hub-item img {
            width: 70px; /* (V12) í¬ê¸° ì¡°ì • */
            height: 70px;
            object-fit: contain;
            background: var(--bg-light-gray);
            border-radius: 15px;
            padding: 10px;
        }
        .hub-item h3 { margin: 8px 0 0 0; font-size: 1em; color: var(--text-primary); text-align: center; border: none; padding: 0; font-weight: 500; }
        
        #page-home > div {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }
        #page-home > div:last-child { margin-bottom: 0; }
        #page-home > .hub-container { margin-bottom: 15px; }

        /* 4-2. ì¶œì„ í˜ì´ì§€ (ì‘ì€ ì°½) */
        #page-attendance { background-color: #e9ecef; padding: 20px; display: flex; justify-content: center; align-items: center; }
        #calendarContainer {
            margin: 0;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1); /* (V12) ê·¸ë¦¼ì ê°•í™” */
            max-width: 450px;
            width: 100%;
        }
        /* 4-3. ë„ê° í˜ì´ì§€ (ë§ˆë²•ì±…) */
        #page-pokedex { background-image: url('https://i.pinimg.com/originals/8a/a5/c8/8aa5c8c5c7f1f0a5f71e83ed73b57f00.jpg'); padding: 0; }
        #pokedex-overlay { background: rgba(255, 255, 255, 0.85); padding: 20px; margin: 20px; border-radius: 10px; min-height: 410px; }
        #pokedex { margin-top: 0; }
        
        /* 4-4. ìƒì  í˜ì´ì§€ (V12 ë””ìì¸) */
        #page-shop { background-image: url('https://i.pinimg.com/originals/cf/2a/3b/cf2a3b090f77d463b267576b509f6e69.png'); background-repeat: repeat; background-size: 100px; padding: 15px; }
        #page-shop > h2, #page-shop > p { background: var(--card-bg); padding: 8px 12px; border-radius: 8px; display: inline-block; color: var(--text-primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .shop-grid {
            /* (V12) ê°€ë…ì„± ë°°ê²½ ì œê±° (ê°œë³„ ì¹´ë“œê°€ ì´ì¨) */
            /* background: rgba(255, 255, 255, 0.9); */
            padding: 0; /* (V12) */
            border-radius: 10px;
            margin-top: 15px;
        }

        /* === 5. (V12 ì‹ ê·œ) í€˜ìŠ¤íŠ¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ === */
        #page-quest {
            padding: 15px;
            background-color: var(--bg-light-gray); /* (V12) í˜ì´ì§€ ë°°ê²½ìƒ‰ */
        }
        .quest-category { margin-bottom: 20px; }
        
        /* (V12) ì¹´ë“œ ë””ìì¸ ì ìš© */
        .quest-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px; /* (V12) ê³¡ë¥  */
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05); /* (V12) ì¹´ë“œ ê·¸ë¦¼ì */
            transition: all 0.2s ease;
        }
        .quest-item.complete {
            background-color: #f0fff4; /* (V12) ì™„ë£Œëœ í€˜ìŠ¤íŠ¸ */
            border-color: var(--point-green);
        }
        .quest-item.disabled {
            background-color: #f5f5f5;
            border-color: #e0e0e0;
            opacity: 0.7;
        }
        .quest-text { display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 1.1em; margin-bottom: 8px; }
        .quest-text .quest-reward {
            font-size: 0.9em;
            color: var(--accent-yellow); /* (V12) ê°•ì¡°ìƒ‰ */
            background: #444;
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 700;
        }
        .quest-progress-text { text-align: right; font-size: 0.9em; color: var(--text-secondary); margin-bottom: 5px; }
        .progress-bar { width: 100%; height: 12px; background-color: var(--border-color); border-radius: 6px; overflow: hidden; }
        .progress-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, var(--point-green), #81c784);
            border-radius: 6px;
            transition: width 0.3s ease;
        }
        .quest-item.complete .progress-bar-inner { background: var(--point-green); }
        
        /* (V12) ì‹œë®¬ë ˆì´ì…˜ ë²„íŠ¼ */
        .quest-simulation { display: flex; gap: 10px; margin-top: 10px; }
        .quest-sim-btn {
            flex: 1;
            background-color: var(--primary-blue); /* (V12) ë©”ì¸ ì»¬ëŸ¬ */
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quest-sim-btn:hover { background-color: #0056b3; transform: translateY(-2px); }
        .quest-sim-btn:active { transform: scale(0.98); }

        #questLogContainer { background: #2a2a2a; color: #fafafa; padding: 15px; border-radius: 8px; height: 150px; overflow-y: auto; font-size: 0.9em; font-family: 'Courier New', Courier, monospace; }
        #questLogContainer div { padding: 3px 0; border-bottom: 1px dashed #555; }

        /* === 6. ëª¨ë‹¬ (V12 ë””ìì¸) === */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.6); display: none; justify-content: center; align-items: center; z-index: 200; }
        .modal-content {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 16px; /* (V12) ê³¡ë¥  */
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s ease-out;
        }
        .modal-content img { width: 150px; height: 150px; background: var(--bg-light-gray); border-radius: 50%; margin: 15px 0; image-rendering: pixelated; }
        .modal-content p { font-size: 1.5em; font-weight: 700; margin: 10px 0 20px 0; }
        .modal-content .buy-btn { width: 100%; } /* (V12) ë²„íŠ¼ ìŠ¤íƒ€ì¼ì€ ì•„ë˜ .buy-btnì—ì„œ ê³µí†µ ì ìš© */
        @keyframes modalFadeIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

        /* === 7. ê¸°íƒ€ ìŠ¤íƒ€ì¼ (V12 ë””ìì¸) === */
        /* (V12) ìƒíƒœì°½ ë””ìì¸ */
        .status {
            display: flex;
            justify-content: space-around;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .status-item { text-align: center; }
        .status-item span { font-size: 0.9em; color: var(--text-secondary); display: block; margin-bottom: 5px; font-weight: 500; }
        .status-item strong { font-size: 1.8em; color: var(--primary-blue); font-weight: 700; }
        
        #calendarHeader { font-size: 1.5em; font-weight: 700; margin-bottom: 15px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-day-name { font-weight: 700; text-align: center; color: var(--text-secondary); font-size: 0.9em; padding-bottom: 5px; }
        .calendar-day { height: 60px; border: 1px solid var(--border-color); border-radius: 8px; text-align: center; padding: 5px; font-size: 1.1em; position: relative; background-color: var(--card-bg); color: var(--text-secondary); transition: background-color 0.2s; }
        .calendar-day.empty { background-color: transparent; border: none; }
        .calendar-day.clickable { cursor: pointer; }
        .calendar-day.clickable:hover { background-color: #e6f2ff; }
        .calendar-day.today { border: 2px solid var(--primary-blue); font-weight: 700; color: var(--primary-blue); }
        .calendar-day.stamped { background-color: var(--point-green); color: white; font-weight: 700; cursor: not-allowed; border-color: #34a853; }
        .calendar-day.stamped::after { content: 'ì¶œì„'; font-size: 0.8em; display: block; margin-top: 5px; }
        .calendar-day .points-toast { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); background: var(--point-red); color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.8em; font-weight: bold; animation: fadeOutUp 1.5s ease-out; z-index: 10; }
        
        /* (V12) ìƒì /ë„ê° ì¹´ë“œ ë””ìì¸ */
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; }
        .shop-item {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            background: var(--card-bg);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
        }
        .shop-item:hover { transform: translateY(-5px); box-shadow: 0 6px 15px rgba(0,0,0,0.1); }
        .shop-item h3 { margin: 10px 0 5px 0; border: none; padding: 0; text-align: center; font-weight: 700; }
        .shop-item p { font-size: 0.9em; color: var(--text-secondary); }
        
        /* (V12) ê³µìš© ë²„íŠ¼ ìŠ¤íƒ€ì¼ (êµ¬ë§¤/ì§„í™”) */
        .buy-btn, .evolve-btn {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            width: 100%;
            transition: all 0.2s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }
        .buy-btn:hover, .evolve-btn:hover { background-color: #0056b3; transform: translateY(-2px); }
        .buy-btn:active, .evolve-btn:active { transform: scale(0.98); }
        .evolve-btn { background-color: var(--point-green); } /* ì§„í™” ë²„íŠ¼ */
        .evolve-btn:hover { background-color: #34a853; }
        .buy-btn:disabled, .evolve-btn:disabled {
            background-color: #aaa;
            cursor: not-allowed;
            transform: none;
        }
        .shop-item.disabled { background: #f5f5f5; opacity: 0.7; }

        /* (V12) ë„ê° ì¹´ë“œ */
        #pokedexGrid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; margin-top: 20px; }
        .pokemon-grid-item {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s ease;
            position: relative;
        }
        .pokemon-grid-item:hover { transform: translateY(-5px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .pokemon-grid-item img { width: 90px; height: 90px; object-fit: contain; background-color: var(--bg-light-gray); border-radius: 50%; margin-bottom: 10px; }
        .pokemon-grid-item .pokemon-id { font-size: 0.8em; color: var(--text-secondary); margin-bottom: 5px; }
        .pokemon-grid-item .pokemon-name { font-weight: 700; font-size: 1.1em; color: var(--text-primary); }
        .pokemon-grid-item .pokemon-count { position: absolute; top: 5px; right: 5px; background: var(--point-red); color: white; font-weight: 700; border-radius: 50%; width: 28px; height: 28px; line-height: 28px; font-size: 0.9em; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
        
        #adminPanel { background: #fff8e1; border: 1px solid #ffecb3; border-radius: 12px; padding: 15px; }
        #adminPanel h3 { margin-top: 0; text-align: center; color: #f57f17; border: none; padding: 0; font-weight: 700; }
        .admin-actions { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .admin-actions button { background-color: #f57f17; font-size: 0.9em; padding: 8px 12px; border: none; border-radius: 8px; color: white; cursor: pointer; transition: all 0.2s ease; }
        .admin-actions button:hover { background-color: #e65100; transform: translateY(-2px); }
        
        #log { background: #2a2a2a; color: #00ff00; padding: 15px; border-radius: 8px; font-family: 'Courier New', Courier, monospace; height: 150px; overflow-y: auto; font-size: 0.9em; }
        @keyframes fadeOutUp { 0% { opacity: 1; transform: translate(-50%, 0); } 100% { opacity: 0; transform: translate(-50%, -30px); } }
    </style>
</head>
<body>

    <div id="appContainer">
        <h1>ğŸƒâ€â™‚ï¸ í¬ì¼“ëª¬ ëŸ¬ë‹ ì•± V12</h1>

        <div id="page-home" class="page active">
            <div class="hub-container">
                <div class="hub-item" onclick="showPage('page-shop')">
                    <img src="https://static.wikia.nocookie.net/pokemon/images/c/c5/Pok%C3%A9_Mart_building_RSE.png/revision/latest/scale-to-width-down/1000?cb=20130310023024" alt="ìƒì ">
                    <h3>ìƒì </h3>
                </div>
                <div class="hub-item" onclick="showPage('page-pokedex')">
                    <img src="https://www.pngkit.com/png/full/15-152011_pokedex-icon-pixel-pokedex-icon.png" alt="ë„ê°">
                    <h3>ë„ê°</h3>
                </div>
                <div class="hub-item" onclick="showPage('page-attendance')">
                    <img src="https://i.pinimg.com/originals/1a/0c/32/1a0c32b55f847471ad83a0ad051c518d.png" alt="ì¶œì„">
                    <h3>ì¶œì„</h3>
                </div>
            </div>
            <div class="status">
                <div class="status-item">
                    <span>ë‚´ í¬ì¸íŠ¸</span>
                    <strong id="pointsDisplay">0</strong>
                </div>
                <div class="status-item">
                    <span>ì¶œì„ ì§„í–‰ë„ (ë‹¤ìŒ í¬ì¼“ëª¬)</span>
                    <strong id="attendanceProgress">0 / 3</strong>
                </div>
                <div class="status-item">
                    <span>ì´ ì ‘ì†ì¼</span>
                    <strong id="totalLoginsDisplay">0</strong>
                </div>
            </div>
            <div id="adminPanel">
                <h3>ğŸ”‘ ê´€ë¦¬ì í…ŒìŠ¤íŠ¸ íŒ¨ë„</h3>
                <div class="admin-actions">
                    <button id="adminAddPoints">100 í¬ì¸íŠ¸ ì¶”ê°€</button>
                    <button id="adminAddBasic">ê¸°ë³¸ í¬ì¼“ëª¬ 1ë§ˆë¦¬ íšë“</button>
                    <button id="adminAddRandom">ì¤‘ê¸‰ í¬ì¼“ëª¬ 1ë§ˆë¦¬ íšë“</button>
                    <button id="adminClearData">!! ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™” !!</button>
                </div>
            </div>
            <div id="log">ì‹œìŠ¤í…œ ë¡œê·¸...</div>
        </div>
        
        <div id="page-attendance" class="page">
            <div id="calendarContainer">
                <h2 id="calendarHeader">11ì›” 2025</h2>
                <div class="calendar-grid" id="calendarWeekdays"></div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </div>

        <div id="page-pokedex" class="page">
            <div id="pokedex-overlay">
                <div id="pokedex">
                    <h2>ğŸ“œ ë‚˜ì˜ í¬ì¼“ëª¬ ë„ê°</h2>
                    <div id="pokedexGrid"></div>
                </div>
            </div>
        </div>

        <div id="page-shop" class="page">
            <h2>ğŸ›’ í¬ì¼“ëª¬ ìƒì  ğŸ›’</h2>
            <p>í¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ì´í…œì„ êµ¬ë§¤í•˜ì„¸ìš”!</p>
            <div class="shop-grid">
                <div class="shop-item" id="buy-10p">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrh9SpQTEsdhlKv_gKbo2wbd3eWZoxkWVTXQ&s" alt="ëª¬ìŠ¤í„°ë³¼">
                    <h3>ëª¬ìŠ¤í„°ë³¼ ë½‘ê¸°</h3>
                    <p>ê¸°ë³¸ í¬ì¼“ëª¬ 1ë§ˆë¦¬ íšë“</p>
                    <button class="buy-btn">êµ¬ë§¤ (10P)</button>
                </div>
                <div class="shop-item" id="buy-50p">
                    <img src="https://static.wikia.nocookie.net/pokemon/images/a/a2/Great_Ball_Sprite.png" alt="ìŠˆí¼ë³¼">
                    <h3>ìŠˆí¼ë³¼ ë½‘ê¸°</h3>
                    <p>ê¸°ë³¸ í˜¹ì€ ì¤‘ê¸‰ í¬ì¼“ëª¬ íšë“</p>
                    <button class="buy-btn">êµ¬ë§¤ (50P)</button>
                </div>
                <div class="shop-item" id="buy-100p">
                    <img src="https://static.wikia.nocookie.net/pokemon/images/a/a5/Ultra_Ball_Sprite.png" alt="í•˜ì´í¼ë³¼">
                    <h3>í•˜ì´í¼ë³¼ ë½‘ê¸°</h3>
                    <p>ì¤‘ê¸‰ í˜¹ì€ ì „ì„¤ í¬ì¼“ëª¬ íšë“</p>
                    <button class="buy-btn">êµ¬ë§¤ (100P)</button>
                </div>
            </div>
        </div>

        <div id="page-quest" class="page">
            <h2>ğŸ† í€˜ìŠ¤íŠ¸ ë° ì—…ì </h2>
            <div class="quest-category">
                <h3>ğŸ—“ï¸ ì ‘ì† í€˜ìŠ¤íŠ¸</h3>
                <div id="quest-container-login"></div>
            </div>
            <div class="quest-category">
                <h3>ğŸ ì¶œì„ í€˜ìŠ¤íŠ¸</h3>
                <div id="quest-container-attendance"></div>
            </div>
            <div class="quest-category">
                <h3>ğŸƒâ€â™‚ï¸ ëŸ°ë‹ í€˜ìŠ¤íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)</h3>
                <p style="text-align: center; font-size: 0.9em; color: var(--text-secondary);">(ì‹¤ì œ ìš´ë™ì„ ê°ì§€í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ë²„íŠ¼ìœ¼ë¡œ ì§„í–‰ë„ë¥¼ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.)</p>
                <div class="quest-simulation">
                    <button id="simRun1" class="quest-sim-btn">ëŸ°ë‹ 1km ê¸°ë¡</button>
                    <button id="simRun5" class="quest-sim-btn">ëŸ°ë‹ 5km ê¸°ë¡</button>
                </div>
                <div id="quest-container-run"></div>
            </div>
            <div class="quest-category">
                <h3>ğŸ‹ï¸â€â™€ï¸ ì›¨ì´íŠ¸ í€˜ìŠ¤íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)</h3>
                <div class="quest-simulation">
                    <button id="simWeight1" class="quest-sim-btn">ì›¨ì´íŠ¸ 1íšŒ ê¸°ë¡</button>
                </div>
                <div id="quest-container-weight"></div>
            </div>
            <div class="quest-category">
                <h3>âš”ï¸ ëŒ€ì „ í€˜ìŠ¤íŠ¸</h3>
                <p style="text-align: center; font-weight: bold; color: var(--point-red);">(ëŒ€ì „ ê¸°ëŠ¥ì€ ì¹œêµ¬ ëª©ë¡ê³¼ ì„œë²„ê°€ í•„ìš”í•˜ë¯€ë¡œ, í˜„ì¬ HTML íŒŒì¼ ë‚´ì—ì„œëŠ” êµ¬í˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.)</p>
                <div id="quest-container-pvp"></div>
            </div>
            <div class="quest-category">
                <h3>ğŸ“œ ì™„ë£Œ ê¸°ë¡ (ê¸°ë¡ì°½)</h3>
                <div id="questLogContainer"></div>
            </div>
        </div>
        
        <nav id="bottomNav">
            <button class="nav-btn active" data-page="page-home">ğŸ  í™ˆ</button>
            <button class="nav-btn" data-page="page-attendance">ğŸ—“ï¸ ì¶œì„</button>
            <button class="nav-btn" data-page="page-pokedex">ğŸ“œ ë„ê°</button>
            <button class="nav-btn" data-page="page-shop">ğŸ›’ ìƒì </button>
            <button class="nav-btn" data-page="page-quest">ğŸ† í€˜ìŠ¤íŠ¸</button>
        </nav>

    </div>

    <div id="gotchaModal" class="modal-overlay">
        <div class="modal-content">
            <h2>ìƒˆë¡œìš´ í¬ì¼“ëª¬ íšë“!</h2>
            <img id="gotchaPokemonImage" src="" alt="íšë“í•œ í¬ì¼“ëª¬" />
            <p id="gotchaPokemonName">í¬ì¼“ëª¬ ì´ë¦„</p>
            <button id="gotchaConfirmButton" class="buy-btn">ë„ê°ì—ì„œ í™•ì¸</button>
        </div>
    </div>


    <script>
        // === (V11) ì½”ë“œ (V11ê³¼ ë™ì¼, ë²„ê·¸ ìˆ˜ì •ë¨) ===
        
        // === (V11) ì„¤ì • ê°’ ===
        const ATTENDANCE_REWARD_POINTS = 3;
        const ATTENDANCE_GOAL = 3; 
        const EVOLVE_COST = 10;
        const POKEAPI_BASE_URL = 'https://pokeapi.co/api/v2/';
        const SHOP_COST_10P = 10;
        const SHOP_COST_50P = 50;
        const SHOP_COST_100P = 100;
        const ATTENDANCE_POOL = [1, 4, 7, 25, 133];
        const POOL_10P = [1, 4, 7, 10, 13, 16, 19, 25, 133];
        const POOL_50P_MID = [56, 58, 66, 74, 95, 123, 127, 128, 143, 147];
        const POOL_100P_LEGEND = [144, 145, 146, 150];
        const ADMIN_BASIC_POOL = [1, 4, 7, 25, 133];
        const ADMIN_RANDOM_POOL = [56, 58, 66, 74, 95, 123, 127, 128, 143, 147];
        
        // === (V10) í€˜ìŠ¤íŠ¸ "ë°ì´í„°ë² ì´ìŠ¤" ===
        const MASTER_QUEST_LIST = {
            'login_1': { category: 'login', title: '1ì¼ ì ‘ì†', goal: 1, reward: 10 },
            'login_3': { category: 'login', title: '3ì¼ ì ‘ì†', goal: 3, reward: 30 },
            'login_5': { category: 'login', title: '5ì¼ ì ‘ì†', goal: 5, reward: 50 },
            'login_7': { category: 'login', title: '7ì¼ ì ‘ì†', goal: 7, reward: 100 },
            'login_15': { category: 'login', title: '15ì¼ ì ‘ì†', goal: 15, reward: 150 },
            'login_30': { category: 'login', title: '30ì¼ ì ‘ì†', goal: 30, reward: 300 },
            'attend_1': { category: 'attendance', title: 'ì²« í¬ì¼“ëª¬ íšë“í•˜ê¸° (ì¶œì„)', goal: 1, reward: 10 },
            'attend_3': { category: 'attendance', title: 'í¬ì¼“ëª¬ 3ë§ˆë¦¬ íšë“ (ì¶œì„)', goal: 3, reward: 50 },
            'run_1': { category: 'run', title: '1km ë‹¬ë¦¬ê¸°', goal: 1, reward: 5 },
            'run_10': { category: 'run', title: '10km ë‹¬ë¦¬ê¸°', goal: 10, reward: 50 },
            'run_50': { category: 'run', title: '50km ë‹¬ë¦¬ê¸°', goal: 50, reward: 100 },
            'run_100': { category: 'run', title: '100km ë‹¬ë¦¬ê¸°', goal: 100, reward: 200 },
            'weight_1': { category: 'weight', title: 'ì›¨ì´íŠ¸ 1íšŒ', goal: 1, reward: 5 },
            'weight_10': { category: 'weight', title: 'ì›¨ì´íŠ¸ 10íšŒ', goal: 10, reward: 50 },
            'weight_50': { category: 'weight', title: 'ì›¨ì´íŠ¸ 50íšŒ', goal: 50, reward: 100 },
            'weight_100': { category: 'weight', title: 'ì›¨ì´íŠ¸ 100íšŒ', goal: 100, reward: 200 },
            'pvp_1': { category: 'pvp', title: 'ì¹œêµ¬ì™€ 1ë²ˆ ëŒ€ì „', goal: 1, reward: 20 },
            'pvp_5': { category: 'pvp', title: 'ì¹œêµ¬ì™€ 5ë²ˆ ëŒ€ì „', goal: 5, reward: 50 },
            'pvp_win_1': { category: 'pvp', title: 'ëŒ€ì „ 1ë²ˆ ì´ê¸°ê¸°', goal: 1, reward: 30 },
            'pvp_win_10': { category: 'pvp', title: 'ëŒ€ì „ 10ë²ˆ ì´ê¸°ê¸°', goal: 10, reward: 100 },
        };
        
        // === DOM ìš”ì†Œ (V11) ===
        const pointsDisplay = document.getElementById('pointsDisplay');
        const attendanceProgress = document.getElementById('attendanceProgress'); 
        const totalLoginsDisplay = document.getElementById('totalLoginsDisplay'); 
        const calendarHeader = document.getElementById('calendarHeader');
        const calendarWeekdays = document.getElementById('calendarWeekdays');
        const calendarGrid = document.getElementById('calendarGrid');
        const pokedexGrid = document.getElementById('pokedexGrid');
        const log = document.getElementById('log');
        const gotchaModal = document.getElementById('gotchaModal');
        const gotchaPokemonImage = document.getElementById('gotchaPokemonImage');
        const gotchaPokemonName = document.getElementById('gotchaPokemonName');
        const gotchaConfirmButton = document.getElementById('gotchaConfirmButton');
        const questContainers = {
            login: document.getElementById('quest-container-login'),
            attendance: document.getElementById('quest-container-attendance'),
            run: document.getElementById('quest-container-run'),
            weight: document.getElementById('quest-container-weight'),
            pvp: document.getElementById('quest-container-pvp'),
            log: document.getElementById('questLogContainer')
        };

        // === ê²Œì„ ë°ì´í„° (V11) ===
        let userPoints = 0;
        let attendanceCount = 0; // 3íšŒ ì¶œì„ìš© ì„ì‹œ ì¹´ìš´í„°
        let pokedex = {};
        let monthlyStamps = []; 
        let currentCalendarMonth = -1;
        let questData = {}; // í€˜ìŠ¤íŠ¸ ëˆ„ì  ì§„í–‰ë„ (ì˜ˆ: questData.attendance = í¬ì¼“ëª¬ íšë“ íšŸìˆ˜)
        let completedQuests = [];
        let lastLoginDate = '';

        // === ì´ˆê¸°í™” ===
        document.addEventListener('DOMContentLoaded', () => {
            initializeGameData(); 
            updateUI();
            setupAdminButtons();
            setupNavigation();
            setupQuestPage(); 
            
            document.getElementById('buy-10p').querySelector('.buy-btn').addEventListener('click', () => handleShopBuy(SHOP_COST_10P));
            document.getElementById('buy-50p').querySelector('.buy-btn').addEventListener('click', () => handleShopBuy(SHOP_COST_50P));
            document.getElementById('buy-100p').querySelector('.buy-btn').addEventListener('click', () => handleShopBuy(SHOP_COST_100P));
            gotchaConfirmButton.addEventListener('click', closeGotchaModal);
        });

        // 1. (V11) ë°ì´í„° ì´ˆê¸°í™”
        function initializeGameData() {
            userPoints = parseInt(localStorage.getItem('userPoints') || '100');
            attendanceCount = parseInt(localStorage.getItem('attendanceCount') || '0'); 
            pokedex = JSON.parse(localStorage.getItem('pokedex') || '{}');
            questData = JSON.parse(localStorage.getItem('questData') || '{}');
            completedQuests = JSON.parse(localStorage.getItem('completedQuests') || '[]');
            lastLoginDate = localStorage.getItem('lastLoginDate') || '';
            
            questData.loginDays = questData.loginDays || 0;
            questData.attendance = questData.attendance || 0; 
            questData.run = questData.run || 0;
            questData.weight = questData.weight || 0;
            questData.pvp = questData.pvp || 0;
            
            const today = new Date().toISOString().split('T')[0]; 
            if (today !== lastLoginDate) {
                questData.loginDays += 1;
                lastLoginDate = today;
                localStorage.setItem('lastLoginDate', today);
                logMessage(`ìƒˆë¡œìš´ ì ‘ì†ì„ í™˜ì˜í•©ë‹ˆë‹¤! (ì´ ${questData.loginDays}ì¼ì§¸)`);
                checkQuestCompletion('login');
            } else {
                logMessage(`ì˜¤ëŠ˜ (${questData.loginDays}ì¼ì§¸) ë‹¤ì‹œ ì ‘ì†í–ˆìŠµë‹ˆë‹¤.`);
            }
            
            const savedMonth = parseInt(localStorage.getItem('currentMonth') || '-1');
            currentCalendarMonth = new Date().getMonth();
            if (savedMonth === currentCalendarMonth) {
                monthlyStamps = JSON.parse(localStorage.getItem('monthlyStamps') || '[]');
            } else {
                monthlyStamps = [];
                localStorage.setItem('monthlyStamps', '[]');
                localStorage.setItem('currentMonth', currentCalendarMonth);
            }
            
            logMessage("ê²Œì„ ë°ì´í„° ë¡œë“œ ì™„ë£Œ. (V12 - ë””ìì¸ ê°œì„ )");
            saveData(); 
        }

        // 2. (V11) ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('userPoints', userPoints);
            localStorage.setItem('attendanceCount', attendanceCount); 
            localStorage.setItem('pokedex', JSON.stringify(pokedex));
            localStorage.setItem('monthlyStamps', JSON.stringify(monthlyStamps));
            localStorage.setItem('currentMonth', currentCalendarMonth);
            localStorage.setItem('questData', JSON.stringify(questData));
            localStorage.setItem('completedQuests', JSON.stringify(completedQuests));
            localStorage.setItem('lastLoginDate', lastLoginDate);
        }

        // 3. (V11) UI ì—…ë°ì´íŠ¸
        function updateUI() {
            pointsDisplay.textContent = userPoints;
            totalLoginsDisplay.textContent = questData.loginDays; 
            attendanceProgress.textContent = `${attendanceCount} / ${ATTENDANCE_GOAL}`; 
            
            renderCalendar();
            renderPokedexGrid();
            renderQuestPage(); 
        }

        // 4. (V10) í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ (ë™ì¼)
        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    showPage(button.dataset.page);
                });
            });
        }
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(pageId);
            if (targetPage) { targetPage.classList.add('active'); }
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            const targetNavButton = document.querySelector(`.nav-btn[data-page="${pageId}"]`);
            if (targetNavButton) { targetNavButton.classList.add('active'); }
        }

        // 5. (V11) ìº˜ë¦°ë” ê¸°ëŠ¥ (ë¡œì§ ìˆ˜ì •ë¨)
        function renderCalendar() {
            calendarGrid.innerHTML = '';
            calendarWeekdays.innerHTML = '';
            const forcedToday = new Date(2025, 10, 12); 
            const year_f = forcedToday.getFullYear();
            const month_f = forcedToday.getMonth();
            const todayDate_f = forcedToday.getDate();
            calendarHeader.textContent = `${year_f}ë…„ ${month_f + 1}ì›”`;
            const firstDayOfMonth = new Date(year_f, month_f, 1).getDay();
            const daysInMonth = new Date(year_f, month_f + 1, 0).getDate();
            const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            calendarWeekdays.innerHTML = dayNames.map(name => `<div class="calendar-day-name">${name}</div>`).join('');
            for (let i = 0; i < firstDayOfMonth; i++) { calendarGrid.innerHTML += '<div class="calendar-day empty"></div>'; }
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.textContent = day;
                dayDiv.dataset.day = day;
                if (monthlyStamps.includes(day)) { dayDiv.classList.add('stamped'); }
                else {
                    dayDiv.classList.add('clickable');
                    dayDiv.addEventListener('click', () => handleCalendarClick(dayDiv, day));
                }
                if (day === todayDate_f && !monthlyStamps.includes(day)) { dayDiv.classList.add('today'); }
                calendarGrid.appendChild(dayDiv);
            }
        }
        
        function handleCalendarClick(dayDiv, day) {
            if (monthlyStamps.includes(day)) {
                logMessage("ì´ë¯¸ ì¶œì„í•œ ë‚ ì§œì…ë‹ˆë‹¤."); return;
            }
            logMessage(`${day}ì¼ ì¶œì„! +${ATTENDANCE_REWARD_POINTS}P íšë“.`);
            userPoints += ATTENDANCE_REWARD_POINTS;
            attendanceCount += 1; 
            monthlyStamps.push(day); 
            const pointsToast = document.createElement('span');
            pointsToast.className = 'points-toast';
            pointsToast.textContent = `+${ATTENDANCE_REWARD_POINTS}P`;
            dayDiv.appendChild(pointsToast);
            setTimeout(() => pointsToast.remove(), 1500);

            if (attendanceCount >= ATTENDANCE_GOAL) {
                logMessage(`${ATTENDANCE_GOAL}íšŒ ì¶œì„! ê¸°ë³¸ í¬ì¼“ëª¬ ì§€ê¸‰ ì¤‘...`);
                attendanceCount = 0; 
                const randomId = ATTENDANCE_POOL[Math.floor(Math.random() * ATTENDANCE_POOL.length)];
                grantPokemonById(randomId);
                
                // (V10) ì¶œì„ í€˜ìŠ¤íŠ¸ ì§„í–‰ë„ ì—…ë°ì´íŠ¸ (í¬ì¼“ëª¬ 1íšŒ íšë“)
                updateQuestProgress('attendance', 1); 
            }
            saveData();
            updateUI(); 
        }

        // === 6. í¬ì¼“ëª¬ ê¸°ëŠ¥ (V9ì™€ ë™ì¼) ===
        // (V11) ì½”ë“œê°€ ê¸¸ì–´ì ¸ ìƒëµëœ ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, V10/V11 ì½”ë“œì™€ 100% ë™ì¼í•©ë‹ˆë‹¤.
        async function fetchPokemonData(pokemonId) { 
            logMessage(`PokÃ©API í˜¸ì¶œ: ID ${pokemonId}...`);
            try {
                let cachedData = localStorage.getItem(`pokeCache_v4_${pokemonId}`);
                if (cachedData) { logMessage(`ìºì‹œì—ì„œ ID ${pokemonId} ë°ì´í„° ë¡œë“œ.`); return JSON.parse(cachedData); }
                const pokeResponse = await fetch(`${POKEAPI_BASE_URL}pokemon/${pokemonId}`);
                if (!pokeResponse.ok) throw new Error("Pokemon API ì‘ë‹µ ì‹¤íŒ¨");
                const pokeData = await pokeResponse.json();
                const speciesResponse = await fetch(pokeData.species.url);
                if (!speciesResponse.ok) throw new Error("Species API ì‘ë‹µ ì‹¤íŒ¨");
                const speciesData = await speciesResponse.json();
                const name = speciesData.names.find(n => n.language.name === 'ko')?.name || pokeData.name;
                const sprite = pokeData.sprites.front_default;
                let nextEvolutionId = null;
                if (speciesData.evolution_chain) {
                    const chainResponse = await fetch(speciesData.evolution_chain.url);
                    if (chainResponse.ok) {
                        const chainData = await chainResponse.json();
                        nextEvolutionId = findNextEvolution(chainData.chain, pokemonId);
                    }
                }
                const pokemonData = { id: pokemonId, name: name, sprite: sprite, nextEvolutionId: nextEvolutionId };
                localStorage.setItem(`pokeCache_v4_${pokemonId}`, JSON.stringify(pokemonData));
                logMessage(`APIì—ì„œ ID ${pokemonId} ë°ì´í„° ë¡œë“œ (ë‹¤ìŒ ì§„í™”: ${nextEvolutionId})`);
                return pokemonData;
            } catch (error) { logMessage(`PokÃ©API ì˜¤ë¥˜: ${error.message}`); return null; }
        }
        function findNextEvolution(chainNode, targetId) { 
            const currentId = parseInt(chainNode.species.url.split('/')[6]);
            if (currentId === targetId) {
                if (chainNode.evolves_to.length > 0) { return parseInt(chainNode.evolves_to[0].species.url.split('/')[6]); }
                return null;
            }
            for (const nextNode of chainNode.evolves_to) {
                const foundId = findNextEvolution(nextNode, targetId);
                if (foundId) return foundId;
            }
            return null;
        }
        function disableAllShopButtons(disabled) { 
            const btn10p = document.getElementById('buy-10p').querySelector('.buy-btn');
            const btn50p = document.getElementById('buy-50p').querySelector('.buy-btn');
            const btn100p = document.getElementById('buy-100p').querySelector('.buy-btn');
            btn10p.disabled = disabled; btn50p.disabled = disabled; btn100p.disabled = disabled;
            if (disabled) {
                if (btn10p.disabled) btn10p.textContent = "ë½‘ëŠ”ì¤‘...";
                if (btn50p.disabled) btn50p.textContent = "ë½‘ëŠ”ì¤‘...";
                if (btn100p.disabled) btn100p.textContent = "ë½‘ëŠ”ì¤‘...";
            } else {
                btn10p.textContent = `êµ¬ë§¤ (${SHOP_COST_10P}P)`;
                btn50p.textContent = `êµ¬ë§¤ (${SHOP_COST_50P}P)`;
                btn100p.textContent = `êµ¬ë§¤ (${SHOP_COST_100P}P)`;
            }
        }
        async function handleShopBuy(cost) { 
            if (userPoints < cost) { logMessage("í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."); return; }
            userPoints -= cost;
            logMessage(`í¬ì¸íŠ¸ ì‚¬ìš©! -${cost}P...`);
            disableAllShopButtons(true);
            let pool = []; let drawType = "";
            if (cost === SHOP_COST_10P) { pool = POOL_10P; drawType = "ëª¬ìŠ¤í„°ë³¼"; }
            else if (cost === SHOP_COST_50P) { pool = POOL_10P.concat(POOL_50P_MID); drawType = "ìŠˆí¼ë³¼"; }
            else if (cost === SHOP_COST_100P) { pool = POOL_50P_MID.concat(POOL_100P_LEGEND); drawType = "í•˜ì´í¼ë³¼"; }
            logMessage(`${drawType} ë½‘ê¸°ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...`);
            const randomId = pool[Math.floor(Math.random() * pool.length)];
            const pokemonData = await grantPokemonById(randomId);
            if (pokemonData) { showGotchaModal(pokemonData); }
            else { logMessage("í¬ì¼“ëª¬ íšë“ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (ë°ì´í„° ì˜¤ë¥˜)"); disableAllShopButtons(false); }
            saveData(); updateUI();
        }
        function showGotchaModal(pokemonData) { 
            gotchaPokemonImage.src = pokemonData.sprite || '';
            gotchaPokemonName.textContent = pokemonData.name;
            gotchaModal.style.display = 'flex';
        }
        function closeGotchaModal() { 
            gotchaModal.style.display = 'none';
            disableAllShopButtons(false);
            showPage('page-pokedex');
            logMessage("íšë“í•œ í¬ì¼“ëª¬ì„ í™•ì¸í•©ë‹ˆë‹¤. (ë„ê° ì´ë™)");
        }
        async function grantPokemonById(pokemonId) { 
            const pokemonData = await fetchPokemonData(pokemonId);
            if (!pokemonData) { logMessage("í¬ì¼“ëª¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."); return null; }
            if (pokedex[pokemonId]) {
                pokedex[pokemonId].count += 1;
                logMessage(`${pokemonData.name} íšë“! (ë³´ìœ : ${pokedex[pokemonId].count}ë§ˆë¦¬)`);
            } else {
                pokedex[pokemonId] = { ...pokemonData, count: 1 };
                logMessage(`ìƒˆë¡œìš´ í¬ì¼“ëª¬ ${pokemonData.name} íšë“!`);
            }
            saveData(); updateUI();
            return pokemonData;
        }
        function renderPokedexGrid() { 
            pokedexGrid.innerHTML = '';
            const pokemonIds = Object.keys(pokedex).sort((a, b) => a - b);
            if (pokemonIds.length === 0) { pokedexGrid.innerHTML = '<p style="text-align: center; color: #777; grid-column: 1 / -1;">ì•„ì§ ì¡ì€ í¬ì¼“ëª¬ì´ ì—†ìŠµë‹ˆë‹¤.</p>'; return; }
            for (const id of pokemonIds) {
                const pokemon = pokedex[id];
                const card = document.createElement('div'); card.className = 'pokemon-grid-item';
                let evolveButtonHtml = '';
                const canEvolve = pokemon.count >= 2 && pokemon.nextEvolutionId && userPoints >= EVOLVE_COST;
                const cantEvolveReason = pokemon.nextEvolutionId === null;
                if (cantEvolveReason) { evolveButtonHtml = `<button class="evolve-btn disabled" disabled>ìµœì¢… ì§„í™”</button>`; }
                else if (canEvolve) { evolveButtonHtml = `<button class="evolve-btn" onclick="handleEvolve('${id}')">ì§„í™” (${EVOLVE_COST}P)</button>`; }
                card.innerHTML = `<div class="pokemon-count">${pokemon.count}</div> <img src="${pokemon.sprite}" alt="${pokemon.name}"> <div class="pokemon-id">No. ${String(id).padStart(3, '0')}</div> <div class="pokemon-name">${pokemon.name}</div> ${evolveButtonHtml}`;
                pokedexGrid.appendChild(card);
            }
        }
        async function handleEvolve(pokemonId) { 
            const pokemon = pokedex[pokemonId];
            const evolvedId = pokemon.nextEvolutionId;
            if (!pokemon || !evolvedId) { logMessage("ì§„í™” ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ìµœì¢… ì§„í™”ì…ë‹ˆë‹¤."); return; }
            if (userPoints < EVOLVE_COST) { logMessage("ì§„í™” í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."); return; }
            if (pokemon.count < 2) { logMessage("ì§„í™”ì— í•„ìš”í•œ í¬ì¼“ëª¬ì´ ë¶€ì¡±í•©ë‹ˆë‹¤."); return; }
            userPoints -= EVOLVE_COST; pokemon.count -= 2;
            logMessage(`${pokemon.name} 2ë§ˆë¦¬ë¥¼ ì‚¬ìš©í•´ ì§„í™”ë¥¼ ì‹œë„í•©ë‹ˆë‹¤... (-${EVOLVE_COST}P)`);
            if (pokemon.count <= 0) { delete pokedex[pokemonId]; }
            const evolvedPokemonData = await grantPokemonById(evolvedId);
            if (evolvedPokemonData) { logMessage(`ì§„í™” ì„±ê³µ! ${pokemon.name}(ì´)ê°€ ${evolvedPokemonData.name}(ìœ¼)ë¡œ ì§„í™”í–ˆìŠµë‹ˆë‹¤!`); }
            else { logMessage("ì§„í™”ëŠ” ì„±ê³µí–ˆìœ¼ë‚˜, ì§„í™”í•œ í¬ì¼“ëª¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤."); }
            saveData(); updateUI();
        }
        function logMessage(message) { 
            log.innerHTML = `<div>[${new Date().toLocaleTimeString()}] ${message}</div>` + log.innerHTML;
        }

        // === (V10) í€˜ìŠ¤íŠ¸ ë¡œì§ (V10ê³¼ ë™ì¼) ===
        
        function setupQuestPage() {
            document.getElementById('simRun1').addEventListener('click', () => updateQuestProgress('run', 1));
            document.getElementById('simRun5').addEventListener('click', () => updateQuestProgress('run', 5));
            document.getElementById('simWeight1').addEventListener('click', () => updateQuestProgress('weight', 1));
        }

        function updateQuestProgress(categoryKey, amount) {
            if (questData[categoryKey] === undefined) {
                questData[categoryKey] = 0;
            }
            questData[categoryKey] += amount;
            
            logMessage(`[í€˜ìŠ¤íŠ¸] '${categoryKey}' ì§„í–‰ë„ ${amount} ì¦ê°€ (í˜„ì¬: ${questData[categoryKey]})`);
            checkQuestCompletion(categoryKey);
            saveData();
            updateUI(); 
        }

        function checkQuestCompletion(categoryKey) {
            for (const questId in MASTER_QUEST_LIST) {
                const quest = MASTER_QUEST_LIST[questId];
                if (quest.category === categoryKey && !completedQuests.includes(questId)) {
                    const currentProgress = questData[categoryKey];
                    if (currentProgress >= quest.goal) {
                        completedQuests.push(questId);
                        userPoints += quest.reward;
                        logMessage(`ğŸ† í€˜ìŠ¤íŠ¸ ì™„ë£Œ: ${quest.title}! +${quest.reward}P`);
                    }
                }
            }
        }
        
        function renderQuestPage() {
            Object.values(questContainers).forEach(container => container.innerHTML = '');
            for (const questId in MASTER_QUEST_LIST) {
                const quest = MASTER_QUEST_LIST[questId];
                const targetContainer = questContainers[quest.category];
                if (!targetContainer) continue; 
                const isComplete = completedQuests.includes(questId);
                const isPvp = quest.category === 'pvp';
                let currentProgress = questData[quest.category] || 0;
                if (currentProgress > quest.goal) { currentProgress = quest.goal; }
                const percent = isComplete ? 100 : Math.floor((currentProgress / quest.goal) * 100);
                let itemClass = 'quest-item';
                if (isComplete) itemClass += ' complete';
                if (isPvp) itemClass += ' disabled'; 
                const questHtml = `
                    <div class="${itemClass}">
                        <div class="quest-text">
                            <span>${quest.title}</span>
                            <span class="quest-reward">ğŸ ${quest.reward} P</span>
                        </div>
                        <div class="quest-progress-text">
                            ${isComplete ? 'ì™„ë£Œ!' : `${currentProgress} / ${quest.goal}`}
                        </div>
                        <div class="progress-bar">
                            <div class="progress-bar-inner" style="width: ${percent}%;"></div>
                        </div>
                    </div>
                `;
                targetContainer.innerHTML += questHtml;
            }
            
            if (completedQuests.length === 0) {
                questContainers.log.innerHTML = '<div>ì•„ì§ ì™„ë£Œí•œ í€˜ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            } else {
                completedQuests.forEach(questId => {
                    const quest = MASTER_QUEST_LIST[questId];
                    if (quest) {
                        questContainers.log.innerHTML = `<div>[${new Date().toLocaleDateString()}] ${quest.title} (+${quest.reward}P)</div>` + questContainers.log.innerHTML;
                    }
                });
            }
        }

        // 13. (V11) ê´€ë¦¬ì ë²„íŠ¼ ì„¤ì •
        function setupAdminButtons() {
            document.getElementById('adminAddPoints').addEventListener('click', () => {
                userPoints += 100;
                logMessage("[Admin] 100 í¬ì¸íŠ¸ ì¶”ê°€ë¨.");
                saveData(); updateUI();
            });
            document.getElementById('adminAddBasic').addEventListener('click', async () => {
                const randomId = ADMIN_BASIC_POOL[Math.floor(Math.random() * ADMIN_BASIC_POOL.length)];
                logMessage(`[Admin] ê¸°ë³¸ í¬ì¼“ëª¬(ID:${randomId}) ê°•ì œ íšë“.`);
                await grantPokemonById(randomId);
            });
            document.getElementById('adminAddRandom').addEventListener('click', async () => {
                const randomId = ADMIN_RANDOM_POOL[Math.floor(Math.random() * ADMIN_RANDOM_POOL.length)];
                logMessage(`[Admin] ì¤‘ê¸‰ í¬ì¼“ëª¬(ID:${randomId}) ê°•ì œ íšë“.`);
                await grantPokemonById(randomId);
            });
            document.getElementById('adminClearData').addEventListener('click', () => {
                if (confirm("!! ê²½ê³  !!\nëª¨ë“  ë°ì´í„°ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? (í¬ì¸íŠ¸, ë„ê°, ì¶œì„, í€˜ìŠ¤íŠ¸)")) {
                    localStorage.clear();
                    userPoints = 100;
                    attendanceCount = 0; 
                    questData = {}; 
                    completedQuests = []; 
                    pokedex = {};
                    monthlyStamps = [];
                    lastLoginDate = ''; 
                    currentCalendarMonth = new Date().getMonth();
                    logMessage("[Admin] ëª¨ë“  ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ.");
                    initializeGameData(); 
                    updateUI();
                }
            });
        }
    </script>
</body>
</html>