<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>러닝 코스 생성 · 거리 측정</title>
  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
  <link rel="stylesheet" href="diet.css" />
</head>
<body>
  <div class="app-root">
    <aside class="sidebar">
      <header class="app-header">
        <h1 class="app-title">러닝 코스 플래너</h1>
        <p class="app-subtitle">지도에서 코스를 만들고, 실제로 걸은 거리를 확인해 보세요.</p>
      </header>

      <section class="panel">
        <h2>내 위치 · 기본 설정</h2>
        <div class="row">
          <button id="myLocationBtn" class="primary">내 위치로 이동</button>
        </div>
        <p class="hint">페이지를 열면 GPS 추적이 자동으로 시작됩니다. 브라우저에서 위치 권한을 허용해주세요.</p>
        <p class="status-row">현재 위치: <span id="gpsStatus">대기 중...</span></p>
        <p class="status-row">실제 이동 거리: <span id="gpsDistance">0.00</span> km</p>
      </section>

      <section class="panel">
        <h2>경로 생성</h2>
        <div class="row">
          <label class="field-label" for="startInput">출발지</label>
          <div class="field-group">
            <input id="startInput" class="text-input" placeholder="예: 서울역" />
            <button id="startSearchBtn" class="secondary">검색</button>
          </div>
        </div>

        <div class="row">
          <label class="field-label" for="endInput">목적지 (선택)</label>
          <div class="field-group">
            <input id="endInput" class="text-input" placeholder="예: 시청" />
            <button id="endSearchBtn" class="secondary">검색</button>
          </div>
        </div>

        <div class="row small-text">
          <p>· 지도 위를 클릭해서도 출발/도착을 지정할 수 있습니다.<br />
             · 첫 번째 클릭: 출발지, 두 번째 클릭: 목적지</p>
        </div>

        <div class="row">
          <button id="clearRouteBtn" class="ghost full">경로 초기화</button>
        </div>

        <div class="row inline">
          <span>현재 코스 거리:</span>
          <strong id="routeDistance">- km</strong>
        </div>
      </section>

      <section class="panel">
        <h2>목표 거리 코스</h2>
        <div class="row">
          <label class="field-label" for="targetKmInput">목표 거리 (km)</label>
          <input
            id="targetKmInput"
            type="number"
            min="0.5"
            step="0.5"
            class="text-input"
            placeholder="예: 4 (사각 루프 기준)"
          />
        </div>
        <div class="row small-text">
          <p>
            · 출발지만 있을 때: 출발지에서 시작해서 다시 출발로 돌아오는 <b>사각 루프</b> 코스를 만듭니다.<br />
            · 출발지와 목적지가 있을 때: 두 지점을 포함하면서 목표 거리에 가깝게 <b>빙빙 도는 코스</b>를 시도합니다 (휴리스틱).
          </p>
        </div>
        <div class="row">
          <button id="generateTargetRouteBtn" class="primary full">목표 거리 코스 생성</button>
        </div>
      </section>
    </aside>

    <main class="map-wrapper">
      <div id="map"></div>
    </main>
  </div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
  <script src="diet.js"></script>
</body>
</html>
