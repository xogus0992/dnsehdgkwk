<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diet Running</title>
  <link rel="stylesheet" href="diet.css" />
  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Kakao Maps JS: 실제 앱키로 교체 필요 -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_APP_KEY&autoload=false&libraries=services"></script>
</head>
<body>
  <div class="app-root">
    <!-- 모바일에서 패널 열기 버튼 -->
    <button id="panel-toggle" class="panel-toggle" type="button">메뉴</button>

    <aside class="side-panel">
      <header class="side-header">
        <h1 class="logo">러닝 코스</h1>
        <p class="logo-sub">가볍게 뛰기 좋은 코스를 찾아보세요</p>
      </header>

      <!-- 출발지 · 도착지 설정 -->
      <section class="card">
        <h2 class="card-title">출발지 · 도착지</h2>
        <div class="field">
          <label>출발지</label>
          <div class="autocomplete-wrap">
            <input
              id="start-input"
              type="text"
              placeholder="예: 서울역"
              autocomplete="off"
            />
            <ul id="start-suggestions" class="suggest-list"></ul>
          </div>
        </div>
        <div class="field">
          <label>도착지 (선택)</label>
          <div class="autocomplete-wrap">
            <input
              id="end-input"
              type="text"
              placeholder="입력 안 하면 출발=도착 루프"
              autocomplete="off"
            />
            <ul id="end-suggestions" class="suggest-list"></ul>
          </div>
        </div>
        <div class="field-inline">
          <div class="field">
            <label>목표 거리 (km)</label>
            <input
              id="target-km"
              type="number"
              min="1"
              step="0.5"
              value="5"
            />
          </div>
          <div class="field">
            <label>루트 타입</label>
            <div class="pill-switch">
              <button
                type="button"
                class="pill pill-active"
                data-type="loop"
              >
                왕복
              </button>
              <button
                type="button"
                class="pill"
                data-type="oneway"
              >
                직선
              </button>
            </div>
          </div>
        </div>
        <div class="btn-row">
          <button id="btn-generate" class="btn-primary" type="button">
            코스 생성
          </button>
          <button id="btn-regenerate" class="btn-ghost" type="button">
            다른 코스
          </button>
        </div>
        <p class="hint-text">
          출발지만 설정해도 근처에서 왕복 코스가 생성됩니다.
        </p>
      </section>

      <!-- 현재 코스 정보 -->
      <section class="card">
        <h2 class="card-title">현재 코스</h2>
        <div class="info-row">
          <span>코스 거리</span>
          <strong id="info-route-km">0.00 km</strong>
        </div>
        <div class="info-row">
          <span>목표 거리</span>
          <strong id="info-target-km">5.00 km</strong>
        </div>
        <div class="info-row">
          <span>차이</span>
          <strong id="info-diff">0.00 km</strong>
        </div>
        <div class="info-row">
          <span>포인트 수</span>
          <strong id="info-points">0</strong>
        </div>
        <div class="info-row">
          <span>루트 패턴</span>
          <strong id="info-pattern">-</strong>
        </div>

        <div class="progress-wrap">
          <div class="progress-label-row">
            <span>목표 달성률</span>
            <span id="progress-label" class="progress-label">0%</span>
          </div>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-bar-fill"></div>
          </div>
        </div>

        <button
          id="btn-save-route"
          class="btn-secondary btn-full"
          type="button"
        >
          현재 코스 저장
        </button>
      </section>

      <!-- 저장된 코스 목록 -->
      <section class="card">
        <h2 class="card-title">저장된 코스</h2>
        <ul id="saved-routes-list" class="saved-list">
          <li class="saved-empty">저장된 코스가 없습니다.</li>
        </ul>
      </section>

      <!-- GPS 정보 -->
      <section class="card">
        <h2 class="card-title">실시간 GPS</h2>
        <div class="info-row">
          <span>현재 위치</span>
          <strong id="info-location">확인 중...</strong>
        </div>
        <div class="info-row">
          <span>실제 이동 거리</span>
          <strong id="info-gps-km">0.00 km</strong>
        </div>
        <div class="info-row">
          <span>경과 시간</span>
          <strong id="info-gps-time">00:00</strong>
        </div>
        <div class="info-row">
          <span>평균 페이스</span>
          <strong id="info-gps-pace">-</strong>
        </div>
        <div class="info-row">
          <span>평균 속도</span>
          <strong id="info-gps-speed">-</strong>
        </div>
        <button
          id="btn-my-location"
          class="btn-secondary btn-full"
          type="button"
        >
          내 위치로 지도 이동
        </button>
      </section>
    </aside>

    <main class="map-wrap">
      <div id="map"></div>
      <div id="route-loading" class="loading-overlay">
        코스 생성 중...
      </div>
    </main>
  </div>

  <script src="diet.js"></script>
</body>
</html>
