<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>My ë‹¤ì´ì–´íŠ¸ ì •ë³´ (ì»¬ëŸ¬ ìµœì¢…íŒ)</title>
<style>
    body { font-family: 'Malgun Gothic', dotum, 'ë‹ì›€', sans-serif; background-color: #f0f0f0; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
    .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; }
    h2 { margin-top: 0; }
    .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
    input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-size: 1em; box-sizing: border-box; }
    button { width: 100%; padding: 12px; margin-top: 10px; background: #4caf50; color: white; border: none; border-radius: 8px; font-size: 1.1em; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
    button:hover { background-color: #45a049; }
    #character-display { margin: 25px auto; width: 120px; height: 180px; display: flex; justify-content: center; align-items: center; background-color: #f8f9fa; border-radius: 8px; border: 1px solid #eee; }
    
    #characterImage {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        /* âœ… í‘ë°± í•„í„°ë¥¼ ì œê±°í•˜ì—¬ ì»¬ëŸ¬ë¡œ ë³´ì´ê²Œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. */
    }

    #goal-progress { margin-top: 20px; }
    .progress-bar-container { width: 100%; background-color: #ddd; border-radius: 10px; height: 25px; overflow: hidden; display: flex; }
    #bar-achieved { background-color: #4caf50; height: 100%; transition: width 0.5s ease; }
    #bar-excess { background-color: #e61a5f; height: 100%; transition: width 0.5s ease; }
    #progress-text { font-weight: bold; margin-top: 8px; }
    #result-display { margin-top: 20px; text-align: left; background: #f8f9fa; padding: 15px; border-radius: 8px;}
    #result-display p { margin: 5px 0; font-weight: bold; }
</style>
</head>
<body>

<div class="container">
    <h2>ë‚´ ëª¸ ì •ë³´ ì…ë ¥</h2>
    <div class="input-grid">
        <select id="gender">
            <option value="male">ë‚¨ì„±</option>
            <option value="female">ì—¬ì„±</option>
        </select>
        <input type="number" id="age" placeholder="ë‚˜ì´">
        <input type="number" id="height" placeholder="í‚¤ (cm)">
        <input type="number" id="weight" placeholder="í˜„ì¬ ì²´ì¤‘ (kg)">
        <input type="number" id="fat" placeholder="ì²´ì§€ë°©ë¥  (%)">
        <input type="number" id="muscle" placeholder="ê·¼ìœ¡ëŸ‰ (kg)">
    </div>
    <input type="number" id="goalWeight" placeholder="ëª©í‘œ ì²´ì¤‘ (kg)">
    <button onclick="updateAllInfo()">í™•ì¸</button>
    <div id="character-display">
        <img id="characterImage" src="" alt="ìºë¦­í„°">
    </div>
    <div id="goal-progress">
        <div class="progress-bar-container">
            <div id="bar-achieved"></div>
            <div id="bar-excess"></div>
        </div>
        <div id="progress-text">ëª©í‘œë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.</div>
    </div>
    <div id="result-display">
        <p id="bmi-result">BMI: -</p>
        <p id="bmr-result">ê¸°ì´ˆëŒ€ì‚¬ëŸ‰(BMR): -</p>
    </div>
</div>

<script>
    const characterImages = {
        male: {
            lean: 'https://i.imgur.com/91TKFuE.png',
            average: 'https://i.imgur.com/ecc7NYi.png',
            overweight: 'https://i.imgur.com/QJZsUvT.png',
            obese: 'https://i.imgur.com/qGxG0QR.png'
        },
        female: {
            lean: 'https://i.imgur.com/2bsZnpy.png',
            average: 'https://i.imgur.com/FhsJnOM.png',
            overweight: 'https://i.imgur.com/4QUIyGg.png',
            obese: 'https://i.imgur.com/abQJ2Me.png'
        }
    };

    function updateAllInfo() {
        const gender = document.getElementById("gender").value;
        const age = parseFloat(document.getElementById("age").value);
        const height = parseFloat(document.getElementById("height").value);
        const weight = parseFloat(document.getElementById("weight").value);
        const fat = parseFloat(document.getElementById("fat").value);
        const goalWeight = parseFloat(document.getElementById("goalWeight").value);

        if (height && weight) {
            const bmi = weight / ((height / 100) ** 2);
            let bmiStatus = "";
            if (bmi < 18.5) { bmiStatus = "ì €ì²´ì¤‘"; }
            else if (bmi < 25) { bmiStatus = "ì •ìƒ"; }
            else if (bmi < 30) { bmiStatus = "ê³¼ì²´ì¤‘"; }
            else { bmiStatus = "ë¹„ë§Œ"; }
            document.getElementById("bmi-result").innerText = `BMI: ${bmi.toFixed(1)} (${bmiStatus})`;

            if (!isNaN(fat)) {
                let bodyTypeKey = 'average';
                if (gender === 'male') {
                    if (fat < 14) { bodyTypeKey = 'lean'; }
                    else if (fat < 18) { bodyTypeKey = 'average'; }
                    else if (fat < 25) { bodyTypeKey = 'overweight'; }
                    else { bodyTypeKey = 'obese'; }
                } else { // female
                    if (fat < 21) { bodyTypeKey = 'lean'; }
                    else if (fat < 25) { bodyTypeKey = 'average'; }
                    else if (fat < 31) { bodyTypeKey = 'overweight'; }
                    else { bodyTypeKey = 'obese'; }
                }
                document.getElementById("characterImage").src = characterImages[gender][bodyTypeKey];
                document.getElementById("characterImage").style.display = 'block';
            }

            if (age) {
                let bmr = (gender === 'male')
                    ? 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age)
                    : 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                document.getElementById("bmr-result").innerText = `ê¸°ì´ˆëŒ€ì‚¬ëŸ‰(BMR): ì•½ ${Math.round(bmr)} kcal`;
            } else {
                document.getElementById("bmr-result").innerText = 'ê¸°ì´ˆëŒ€ì‚¬ëŸ‰(BMR): ë‚˜ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.';
            }
        }

        const barAchieved = document.getElementById("bar-achieved");
        const barExcess = document.getElementById("bar-excess");
        const progressText = document.getElementById("progress-text");
        barAchieved.style.width = '0%';
        barExcess.style.width = '0%';
        
        if (weight && goalWeight) {
            if (weight > goalWeight) {
                const diff = weight - goalWeight;
                const achievedPercent = (goalWeight / weight) * 100;
                const excessPercent = 100 - achievedPercent;
                
                barAchieved.style.width = `${achievedPercent}%`;
                barExcess.style.width = `${excessPercent}%`;
                progressText.innerText = `ëª©í‘œê¹Œì§€ ${diff.toFixed(1)} kg ê°ëŸ‰ì´ í•„ìš”í•©ë‹ˆë‹¤!`;

            } else {
                const diff = goalWeight - weight;
                const achievedPercent = (weight / goalWeight) * 100;
                barAchieved.style.width = `${achievedPercent}%`;
                
                if (diff > 0) {
                    progressText.innerText = `ëª©í‘œê¹Œì§€ ${diff.toFixed(1)} kg ì¦ëŸ‰ì´ í•„ìš”í•©ë‹ˆë‹¤!`;
                } else {
                    progressText.innerText = "ğŸ‰ ëª©í‘œ ì²´ì¤‘ ë‹¬ì„±! ì¶•í•˜í•©ë‹ˆë‹¤!";
                }
            }
        } else {
            progressText.innerText = "ëª©í‘œ ì²´ì¤‘ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
        }
    }
    
    window.onload = () => {
        document.getElementById("characterImage").style.display = 'none';
    };
</script>

</body>
</html>